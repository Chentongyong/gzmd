<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" href="css/general.css" />
		<link rel="stylesheet" href="css/sy_assign2.css" />
		<script src="js/mui.min.js"></script>
		<script type="text/javascript">
			mui.init()
		</script>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
		    <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
		    <h1 id="title" class="mui-title">商铺求租</h1>
		    <a class="mui-icon mui-icon-search mui-pull-right"></a>
		    <script>
		    	mui('.mui-bar-nav').on('tap','.mui-pull-right',function(){
		    		mui.openWindow({
				    	url: "sy_search.html",
				    	id: "sy_search.html",
					  	style:{},
//					    	extras:{
//					    		title:title
//					    	},
					  	show: {
					  		autoShow:true,
					  		aniShow:"slide-in-right",
					  		duration:100
					  	},
					  	waiting:{
					  		autoShow:true,
					  	}
				    })
		    	})
		    </script>
		</header>
		<div id="pullrefresh" class="mui-content mui-scroll-wrapper">
			<div class="mui-scroll">
				<!--数据列表-->
				<ul class="ulBox">
					<!--<li class="li_box">
					    <a href="" title="求租天河区餐馆">
						    <h5>求租天河区餐馆</h5>
						    <div class="ass_center">
						        <span><b>150</b>平方</span>
						        <span>餐馆</span>
						        <span>海珠区</span>
						    </div>
						    <p>大家好，我是。。。。</p>
						    <span class="li_fu">07-15</span>
					    </a>
					</li>-->
				</ul>
			</div>
			<!--出租-->
			<div id="she1" class="she_tan">
			    <div class="buy">
			    	<div class="buy_left">
					    <p class="p_color">求租</p>
					    <p class="">求售</p>
			    	</div>
			    	<div class="buy_right">
			    		<ul class="buy_zu">
			    			<li class="li_color">全部分类</li>
			    			<li>酒楼餐饮</li>
			    			<li>美容美发</li>
			    			<li>服饰鞋包</li>
			    			<li>休闲娱乐</li>
			    			<li>百货超市</li>
			    			<li>生活服务</li>
			    			<li>电子通讯</li>
			    			<li>汽修美容</li>
			    			<li>医药保健</li>
			    			<li>家居建材</li>
			    			<li>教育培训</li>
			    			<li>空铺转让</li>
			    			<li>旅馆宾馆</li>
			    			<li>其他行业</li>
			    		</ul>
			    		<ul class="buy_shou" style="display: none;">
			    			<li class="li_color">临街商铺</li>
			    			<li>商场市场商铺</li>
			    			<li>地铁景点商铺</li>
			    			<li>工业区商铺</li>
			    			<li>校区商铺</li>
			    			<li>写字楼底商</li>
			    			<li>社区商铺</li>
			    			<li>商业综合体</li>
			    		</ul>
			    	</div>
			    </div>
			    <script>
			    	
			    </script>
			    <div class="sheet1"></div>
			</div>
			
			<!--区域-->
			<div id="she2" class="she_tan">
			    <ul class="ul_style">
			        <li class="li2 li_color">全城</li>
			        <li class="li2">海珠区</li>
			        <li class="li2">荔湾区</li>
			        <li class="li2">天河区</li>
			        <li class="li2">番禺区</li>
			    </ul>
			    <div class="sheet1"></div>
		    </div>
		    
		    <!--面积-->
		    <div id="she3" class="she_tan ">
			    <ul class="ul_style">
			        <li class="li3 li_color">无限</li>
			        <li class="li3">20平方以下</li>
			        <li class="li3">20-50平方</li>
			        <li class="li3">50-100平方</li>
			        <li class="li3">100-200平方</li>
			        <li class="li3">200-500平方</li>
			        <li class="li3">500平方以上</li>
			    </ul>
			    <div class="sheet1"></div>
			</div>
		</div> 
		<nav class="mui-bar mui-bar-tab">
		    <a class="mui-tab-item">
		        <span class="mui-tab-label">出租</span>
		        <span class="mui-icon mui-icon-arrowright mui-pull-right"></span>
		    </a>
		    <a class="mui-tab-item">
		        <span class="mui-tab-label">区域</span>
		        <span class="mui-icon mui-icon-arrowright mui-pull-right"></span>
		    </a>
		    <a class="mui-tab-item">
		        <span class="mui-tab-label">面积</span>
		        <span class="mui-icon mui-icon-arrowright mui-pull-right"></span>
		    </a>
		</nav>
		<script>
		var pObj = document.getElementById("she1").getElementsByTagName('p');
		var aObj = document.getElementsByClassName('mui-tab-item');
		var liObj1 = document.getElementById("she1").getElementsByTagName('li');
		var span1 = document.getElementsByClassName('mui-tab-label');
		var sheObj = document.getElementsByClassName('she_tan');
		var sheet1 = document.getElementsByClassName('sheet1')
//		var she1 = document.getElementById('she1');
		var she2 = document.getElementById('she2');
		var she3 = document.getElementById('she3');
		var li2 = document.getElementsByClassName('li2');
		var li3 = document.getElementsByClassName('li3');
//		mui.toast(pObj.length)
        for(var sum = 0 ; sum < aObj.length ; sum++){
            aObj[sum].index = sum;
        }

        mui('.mui-bar-tab').on('tap','a',function(){
            var s = this.index;
            sheObj[s].className = 'she_tan she_dis';
//          类型 
            //      点击左边
			mui('.buy_left').on('tap','p',function(){
				for(var j = 0 ; j < pObj.length;j++){
					pObj[j].className = ''
				}
			    this.className = 'p_color';
			})
	//		点击右边
	        mui('.buy_right').on('tap','li',function(){
	            for(var k = 0;k<liObj1.length;k++){
	                liObj1[k].className = ''
	            }
	            this.className = 'li_color';
	            span1[0].innerText = this.innerText;
	            sheObj[s].className = 'she_tan';
	        })
	        
//	                            区域
            mui('#she2').on('tap','li',function(){
				    for(var j2 = 0; j2 < li2.length; j2++){
						li2[j2].className = 'li2';
					}
				    this.className='li2 li_color';
					span1[1].innerText = this.innerText;
					sheObj[s].className = 'she_tan';
			})
				
			//面积
			mui('#she3').on('tap','li',function(){
				for(var j3 = 0; j3 < li3.length; j3++){
					li3[j3].className = 'li3';
				}
			    this.className='li3 li_color';
				span1[2].innerText = this.innerText;
				sheObj[s].className = 'she_tan';
			})
				
			sheet1[s].addEventListener('tap',function(){
				sheObj[s].className = 'she_tan';
			})
            
        })
        
//      mui.plusReady(function(){
//				var cw = plus.webview.currentWebview();
//				var titleName = cw.title;
//				mui.toast(titleName)
//		//      console.log();
//			})
		</script>
		
	</body>

</html>
<script>
	mui.init({
				pullRefresh: {
					container: '#pullrefresh',
					down: {
						callback: pulldownRefresh
					},
					up: {
						contentrefresh: '正在加载...',
						callback: pullupRefresh
					}
				}
			});
			/**
			 * 下拉刷新具体业务实现
			 */
			var titleObj = document.getElementById('title')
			function pulldownRefresh() {
			
				setTimeout(function() {
					var table = document.body.querySelector('.mui-table-view');
					var cells = document.body.querySelectorAll('.mui-table-view-cell');
					for (var i = cells.length, len = i + 3; i < len; i++) {
						var li = document.createElement('li');
						li.className = 'mui-table-view-cell';
						li.innerHTML = '<a class="mui-navigate-right">Item ' + (i + 1) + '</a>';
						//下拉刷新，新纪录插到最前面；
						table.insertBefore(li, table.firstChild);
					}
					mui('#pullrefresh').pullRefresh().endPulldownToRefresh(); //refresh completed
				}, 1500);
			}
			var count = 0;
			/**
			 * 上拉加载具体业务实现
			 */
			function pullupRefresh() {
				setTimeout(function() {
					mui('#pullrefresh').pullRefresh().endPullupToRefresh((++count > 2)); //参数为true代表没有更多数据了。
					var table = document.body.querySelector('.ulBox');
					var cells = document.body.querySelectorAll('li_box');
					for (var i = cells.length, len = i + 20; i < len; i++) {
						var li = document.createElement('li');
						li.innerHTML = '<a href="" title="求租天河区餐馆"><h5>'+'求租天河区餐馆'+'</h5><div class="ass_center"><span><b>'+'150'
						+'</b>'+'平方'+'</span><span>'+'餐馆'+'</span><span>'+'海珠区'+'</span></div><p>'+'大家好，我是。。。。'
						+'<p><span class="li_fu">'+'07-15'+'</span></a>';
						table.appendChild(li);
						
						//跳转详情页
						 mui('li').on('tap','a',function(){
							// 	mui.toast(11111)
							    var title = this.getAttribute('title');
							//  mui.toast(title)
							    mui.openWindow({
							    	url: "mine_details.html",
							    	id: "mine_details.html",
							  	style:{},
							    	extras:{
							    		title:title
							    	},
							  	show: {
							  		autoShow:true,
							  		aniShow:"slide-in-right",
							  		duration:100
							  	},
						//  	waiting:{
						//  		autoShow:true,
						//  	}
						    })
						 })
						 //跳转详情页end
					}
				}, 1500);
			}
			if (mui.os.plus) {
				mui.plusReady(function() {
					setTimeout(function() {
						mui('#pullrefresh').pullRefresh().pullupLoading();
					}, 1000);
					var cw = plus.webview.currentWebview();
					var titleName = cw.title;
					titleObj.innerText = titleName;
					mui.toast(titleName)
			//      console.log();

				});
			} else {
				mui.ready(function() {
					mui('#pullrefresh').pullRefresh().pullupLoading();
				});
			}  
			
			
	    
</script>  